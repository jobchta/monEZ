<!-- auth-supa.html: Supabase-powered auth page for monEZ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#846941">
    <meta name="description" content="monEZ - Supabase Auth">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%23846941'/><text x='50' y='65' font-size='50' text-anchor='middle' fill='white'>ðŸ’°</text></svg>">
    <title>monEZ - Login (Supabase)</title>
    <style>body{font-family:sans-serif;background:linear-gradient(135deg,#846941 0%,#3B6270 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;}.auth-container{background:white;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.2);max-width:400px;width:90%;overflow:hidden;}.auth-header{background:linear-gradient(135deg,#846941 0%,#3B6270 100%);color:white;padding:40px 24px;text-align:center}.auth-logo{font-size:48px;margin-bottom:12px;}.auth-title{font-size:28px;font-weight:600;margin-bottom:8px;}.auth-body{padding:32px 24px}.form-group{margin-bottom:20px}.form-label{font-size:14px;font-weight:600;margin-bottom:8px;color:#232325}.form-input{width:100%;padding:12px 16px;border:1px solid #ECECEC;border-radius:12px;font-size:16px;transition:.2s}.form-input:focus{outline:none;border-color:#846941;box-shadow:0 0 0 3px rgba(132,105,65,0.1)}.btn-primary{width:100%;padding:14px;background:#846941;color:white;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:.2s;margin-top:8px}.btn-primary:hover{background:#73553A;transform:translateY(-2px);box-shadow:0 8px 24px rgba(132,105,65,0.3)}.btn-primary:disabled{opacity:.6;cursor:not-allowed}.toggle-text{text-align:center;font-size:14px;color:#828288;margin-top:20px}.toggle-link{color:#846941;cursor:pointer;font-weight:600;text-decoration:none;border-bottom:2px solid #846941}.toggle-link:hover{opacity:.8;}.error-message{background:#FEE2E2;color:#DC2626;padding:12px;border-radius:8px;font-size:14px;margin-bottom:14px;display:none;}.error-message.show{display:block;}.success-message{background:#DBEAFE;color:#0284C7;padding:12px;border-radius:8px;font-size:14px;margin-bottom:14px;display:none;}.success-message.show{display:block;}</style>
</head>
<body>
<div class="auth-container">
  <div class="auth-header">
    <div class="auth-logo">ðŸ’°</div>
    <div class="auth-title">mon<span style="color:#F59E0B">EZ</span></div>
  </div>
  <div class="auth-body">
    <!-- LOGIN FORM -->
    <form id="login-form">
      <div id="login-error" class="error-message"></div>
      <div id="login-success" class="success-message"></div>
      <div class="form-group">
        <label class="form-label">Email Address</label>
        <input type="email" id="login-email" class="form-input" placeholder="raj@gmail.com" required>
      </div>
      <div class="form-group">
        <label class="form-label">Password</label>
        <input type="password" id="login-password" class="form-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
      </div>
      <button type="submit" class="btn-primary" id="login-btn">Sign In</button>
      <div class="toggle-text">Don't have an account? <span class="toggle-link" onclick="toggleForms()">Sign Up</span></div>
    </form>
    <!-- SIGNUP FORM -->
    <form id="signup-form" style="display:none">
      <div id="signup-error" class="error-message"></div>
      <div id="signup-success" class="success-message"></div>
      <div class="form-group">
        <label class="form-label">Email Address</label>
        <input type="email" id="signup-email" class="form-input" placeholder="raj@gmail.com" required>
      </div>
      <div class="form-group">
        <label class="form-label">Full Name</label>
        <input type="text" id="signup-name" class="form-input" placeholder="Raj Kumar" required>
      </div>
      <div class="form-group">
        <label class="form-label">Phone (Optional)</label>
        <input type="tel" id="signup-phone" class="form-input" placeholder="+91-9876543210">
      </div>
      <div class="form-group">
        <label class="form-label">Password</label>
        <input type="password" id="signup-password" class="form-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
      </div>
      <div class="form-group">
        <label class="form-label">Confirm Password</label>
        <input type="password" id="signup-confirm-password" class="form-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
      </div>
      <button type="submit" class="btn-primary" id="signup-btn">Create Account</button>
      <div class="toggle-text">Already have an account? <span class="toggle-link" onclick="toggleForms()">Sign In</span></div>
    </form>
  </div>
</div>
<script type="module">
import { signup, login } from './js/supabase-auth.js';

window.toggleForms = () => {
  const loginF = document.getElementById('login-form');
  const signupF = document.getElementById('signup-form');
  loginF.style.display = loginF.style.display==='none' ? 'block' : 'none';
  signupF.style.display = signupF.style.display==='none' ? 'block' : 'none';
};

function showError(form, message) {
  const el = document.getElementById(`${form}-error`);
  el.textContent = message;
  el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'),4000);
}
function showSuccess(form, message) {
  const el = document.getElementById(`${form}-success`);
  el.textContent = message;
  el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'),4000);
}
// LOGIN
const loginForm = document.getElementById('login-form');
loginForm.addEventListener('submit', async e=>{
e.preventDefault();
const email = document.getElementById('login-email').value.trim();
const password = document.getElementById('login-password').value;
const btn=document.getElementById('login-btn');
btn.disabled = true; btn.textContent = 'Signing in...';
const res = await login(email,password);
if(res.success){
  showSuccess('login','âœ… Login successful! Redirecting...');
  setTimeout(()=>location.href='/index.html',1000);
}
else{
  showError('login',res.error);
  btn.disabled=false; btn.textContent='Sign In';
}
});
// SIGNUP
const signupForm = document.getElementById('signup-form');
signupForm.addEventListener('submit',async e=>{
e.preventDefault();
const email=document.getElementById('signup-email').value.trim();
const name=document.getElementById('signup-name').value.trim();
const phone=document.getElementById('signup-phone').value.trim();
const password=document.getElementById('signup-password').value;
const confirm=document.getElementById('signup-confirm-password').value;
const btn=document.getElementById('signup-btn');
if(password!==confirm){showError('signup','Passwords do not match');return;}
btn.disabled=true;btn.textContent='Creating...';
const res=await signup(email,password,name,phone);
if(res.success){
 showSuccess('signup','âœ… Account created! Redirecting...');
 setTimeout(()=>location.href='/index.html',1000);
}else{
 showError('signup',res.error);
 btn.disabled=false;btn.textContent='Create Account';
}
});
</script>
</body>
</html>