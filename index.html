<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#846941">
    <meta name="description" content="monEZ - Split expenses, not friendships">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%23846941'/><text x='50' y='65' font-size='50' text-anchor='middle' fill='white'>üí∞</text></svg>">
    <link rel="manifest" href="manifest.json">
    <title>monEZ - Split expenses, not friendships</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/onboarding.css">

</head>
<body>

    <!-- Onboarding Screen -->
<div id="onboarding-screen" class="onboarding-screen hidden">
  
  <!-- Step 1: Country Selection -->
  <div class="onboarding-step" id="onboarding-country">
    <div class="step-header">
      <div class="step-icon">üåç</div>
      <h2>Where are you based?</h2>
      <p>We'll customize monEZ for your region</p>
    </div>
    
    <div class="country-search">
      <input 
        type="text" 
        id="country-search-input" 
        placeholder="üîç Search country..."
        autocomplete="country-name"
      />
    </div>
    
    <div class="country-list-popular">
      <h3>Popular Countries</h3>
      <div class="country-grid" id="popular-countries">
        <!-- Populated by JavaScript -->
      </div>
    </div>
    
    <button class="show-all-btn" id="show-all-countries-btn">
      Show all countries ‚ñº
    </button>
    
    <div class="country-list-all hidden" id="all-countries-container">
      <h3>All Countries</h3>
      <div class="country-grid" id="all-countries">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>
  
  <!-- Step 2: Confirm Settings -->
  <div class="onboarding-step hidden" id="onboarding-confirm">
    <div class="step-header">
      <div class="step-icon">‚ú®</div>
      <h2>We've set up monEZ for you!</h2>
      <p>Based on <strong id="selected-country-display"></strong></p>
    </div>
    
    <div class="settings-preview">
      <!-- Language -->
      <div class="setting-row">
        <div class="setting-icon">üó£Ô∏è</div>
        <div class="setting-content">
          <div class="setting-label">Language</div>
          <div class="setting-value" id="selected-language-display">
            English
          </div>
        </div>
        <button class="change-btn" id="change-language-btn">Change</button>
      </div>
      
      <!-- Currency -->
      <div class="setting-row">
        <div class="setting-icon">üí∞</div>
        <div class="setting-content">
          <div class="setting-label">Currency</div>
          <div class="setting-value" id="selected-currency-display">
            USD ($)
          </div>
        </div>
        <button class="change-btn" id="change-currency-btn">Change</button>
      </div>
      
      <!-- Timezone -->
      <div class="setting-row">
        <div class="setting-icon">üïê</div>
        <div class="setting-content">
          <div class="setting-label">Timezone</div>
          <div class="setting-value" id="selected-timezone-display">
            Auto-detected
          </div>
        </div>
        <button class="change-btn" id="change-timezone-btn">Change</button>
      </div>
      
      <!-- Date Format -->
      <div class="setting-row">
        <div class="setting-icon">üìÖ</div>
        <div class="setting-content">
          <div class="setting-label">Date Format</div>
          <div class="setting-value" id="selected-dateformat-display">
            MM/DD/YYYY
          </div>
        </div>
        <button class="change-btn" id="change-dateformat-btn">Change</button>
      </div>
    </div>
    
    <div class="form-actions">
      <button class="btn-secondary" id="onboarding-back-btn">
        ‚Üê Back
      </button>
      <button class="btn-primary" id="onboarding-continue-btn">
        Looks good! Continue ‚Üí
      </button>
    </div>
  </div>
  
</div>

<!-- Language Picker Modal -->
<div class="modal hidden" id="language-picker-modal">
  <div class="modal-overlay"></div>
  <div class="modal-content">
    <div class="modal-header">
      <h3>Choose Language</h3>
      <button class="modal-close" id="close-language-modal">√ó</button>
    </div>
    <div class="modal-body">
      <input 
        type="text" 
        id="language-search-input" 
        placeholder="üîç Search language..."
      />
      
      <div class="language-groups">
        <!-- Suggested Languages -->
        <div class="language-group">
          <h4>Suggested for your region</h4>
          <div class="language-list" id="suggested-languages-list">
            <!-- Populated by JavaScript -->
          </div>
        </div>
        
        <!-- Popular Languages -->
        <div class="language-group">
          <h4>Popular Languages</h4>
          <div class="language-list" id="popular-languages-list">
            <!-- Populated by JavaScript -->
          </div>
        </div>
        
        <!-- All Languages -->
        <div class="language-group">
          <h4>All Languages</h4>
          <div class="language-list" id="all-languages-list">
            <!-- Populated by JavaScript -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Currency Picker Modal -->
<div class="modal hidden" id="currency-picker-modal">
  <div class="modal-overlay"></div>
  <div class="modal-content">
    <div class="modal-header">
      <h3>Choose Currency</h3>
      <button class="modal-close" id="close-currency-modal">√ó</button>
    </div>
    <div class="modal-body">
      <input 
        type="text" 
        id="currency-search-input" 
        placeholder="üîç Search currency..."
      />
      
      <div class="currency-list" id="currency-list">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>
</div>

<!-- Date Format Picker Modal -->
<div class="modal hidden" id="dateformat-picker-modal">
  <div class="modal-overlay"></div>
  <div class="modal-content">
    <div class="modal-header">
      <h3>Choose Date Format</h3>
      <button class="modal-close" id="close-dateformat-modal">√ó</button>
    </div>
    <div class="modal-body">
      <div class="dateformat-list" id="dateformat-list">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>
</div>

<!-- Timezone Picker Modal -->
<div class="modal hidden" id="timezone-picker-modal">
  <div class="modal-overlay"></div>
  <div class="modal-content">
    <div class="modal-header">
      <h3>Choose Timezone</h3>
      <button class="modal-close" id="close-timezone-modal">√ó</button>
    </div>
    <div class="modal-body">
      <input 
        type="text" 
        id="timezone-search-input" 
        placeholder="üîç Search timezone..."
      />
      
      <div class="timezone-list" id="timezone-list">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>
</div>

    <div class="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-content">
                <div class="logo-large">mon<span class="accent">EZ</span></div>
                <div class="tagline">Split expenses, not friendships</div>
                <div class="loading-spinner"></div>
                <div class="loading-text">Loading your financial companion...</div>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="login-screen" style="display: flex;">
            <div class="login-content">
                <div class="logo-large">mon<span class="accent">EZ</span></div>
                <div class="tagline">Split expenses, not friendships</div>
                <button class="login-button" onclick="signInWithGoogle()">
                    <span>üöÄ</span>
                    Sign in with Google
                </button>
                <div class="login-features">
                    Real-time sync ‚Ä¢ Secure ‚Ä¢ Free
                </div>
            </div>
        </div>

        <!-- PWA Install Prompt -->
        <div id="pwa-prompt" class="pwa-prompt hidden" role="alertdialog" aria-labelledby="pwa-title">
            <div class="pwa-content">
                <div class="pwa-icon" aria-hidden="true">üì±</div>
                <div class="pwa-text">
                    <h3 id="pwa-title">Install monEZ</h3>
                    <p>Get the full app experience on your home screen</p>
                </div>
                <div class="pwa-actions">
                    <button class="btn-secondary" onclick="dismissPWAPrompt()">Maybe later</button>
                    <button class="btn-primary" onclick="installPWA()">Install</button>
                </div>
            </div>
        </div>

        <!-- Main App -->
        <div id="main-app" style="display: none;">
            <!-- App Header -->
            <header class="app-header">
                <div class="header-left">
                    <div class="logo" aria-label="monEZ Home">mon<span class="accent">EZ</span></div>
                    <div class="balance-summary">
                        <div class="balance-label">Your balance</div>
                        <div class="balance-amount" id="balance-hero" aria-live="polite">‚Çπ1,160</div>
                    </div>
                </div>
                <div class="header-right">
                    <button class="icon-btn" onclick="showNotifications()" aria-label="Notifications, 3 unread">
                        <span class="icon" aria-hidden="true">üîî</span>
                        <span class="badge" aria-hidden="true">3</span>
                    </button>
                    <button class="icon-btn" onclick="showProfile()" aria-label="Profile">
                        <div class="avatar" aria-hidden="true">Y</div>
                    </button>
                </div>
            </header>

            <!-- Views Container -->
            <main class="main-content" role="main">
                <!-- Home View -->
                <div id="home-view" class="view active" role="tabpanel">
                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <div class="stat-card positive" role="button" tabindex="0" aria-label="You are owed ‚Çπ1,320">
                            <div class="stat-icon" aria-hidden="true">üíö</div>
                            <div class="stat-content">
                                <div class="stat-label">You're owed</div>
                                <div class="stat-value">‚Çπ1,320</div>
                            </div>
                        </div>
                        <div class="stat-card negative" role="button" tabindex="0" aria-label="You owe ‚Çπ865">
                            <div class="stat-icon" aria-hidden="true">üí∏</div>
                            <div class="stat-content">
                                <div class="stat-label">You owe</div>
                                <div class="stat-value">‚Çπ865</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <button class="action-card primary" onclick="showAddExpense()">
                            <div class="action-icon" aria-hidden="true">‚ûï</div>
                            <div class="action-label">Add Expense</div>
                        </button>
                        <button class="action-card" onclick="showSplitBill()">
                            <div class="action-icon" aria-hidden="true">üßÆ</div>
                            <div class="action-label">Split Bill</div>
                        </button>
                        <button class="action-card" onclick="showSettle()">
                            <div class="action-icon" aria-hidden="true">üí≥</div>
                            <div class="action-label">Settle Up</div>
                        </button>
                        <button class="action-card premium" onclick="showPremiumFeatures()">
                            <div class="action-icon" aria-hidden="true">‚ú®</div>
                            <div class="action-label">AI Insights</div>
                            <div class="premium-badge">PRO</div>
                        </button>
                    </div>

                    <!-- Recent Activity -->
                    <section class="activity-section" aria-labelledby="recent-activity-heading">
                        <div class="section-header">
                            <h3 id="recent-activity-heading">Recent Activity</h3>
                            <button class="view-all" onclick="showExpenses()">View all</button>
                        </div>
                        <div id="recent-expenses" class="activity-list" aria-live="polite"></div>
                    </section>

                    <!-- Groups Preview -->
                    <section class="groups-section" aria-labelledby="groups-preview-heading">
                        <div class="section-header">
                            <h3 id="groups-preview-heading">Your Groups</h3>
                            <div class="group-limit" aria-label="2 out of 3 groups used">2/3 groups</div>
                            <button class="view-all" onclick="showGroups()">View all</button>
                        </div>
                        <div class="groups-preview" id="groups-preview"></div>
                    </section>
                </div>

                <!-- Add Expense View -->
                <div id="add-expense-view" class="view">
                    <div class="view-header">
                        <button class="back-btn" onclick="showHome()" aria-label="Back to Home"><span aria-hidden="true">‚Üê</span></button>
                        <h2>Add Expense</h2>
                        <button class="voice-btn" onclick="startVoiceInput()" aria-label="Voice Input"><span aria-hidden="true">üé§</span></button>
                    </div>
            
                    <form id="expense-form" class="expense-form" aria-labelledby="add-expense-heading">
                        <div id="form-error-msg" role="alert" aria-live="assertive" style="display: none; color: #EF4444; font-size: 14px; padding: 8px 0;"></div>
                        
                        <div class="form-group">
                            <label class="form-label" for="amount">Amount</label>
                            <div class="amount-input-container">
                                <span class="currency-symbol" aria-hidden="true">‚Çπ</span>
                                <input type="number" id="amount" class="form-input amount-field" placeholder="0.00" step="0.01" aria-label="Amount in rupees" required>
                                <button type="button" class="ai-suggest-btn" onclick="aiSuggestAmount()" title="AI Suggestion" aria-label="AI Suggest Amount">
                                    <span class="ai-icon" aria-hidden="true">ü§ñ</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="description">Description</label>
                            <input type="text" id="description" class="form-input" placeholder="What was this for?" aria-label="Expense description" required>
                        </div>
                        
                        <div class="form-group" role="group" aria-labelledby="category-label">
                            <label class="form-label" id="category-label">Category</label>
                            <div class="category-selector">
                                <button type="button" class="category-btn" data-category="üçΩÔ∏è" aria-label="Food category"><span aria-hidden="true">üçΩÔ∏è</span> Food</button>
                                <button type="button" class="category-btn" data-category="üöó" aria-label="Transport category"><span aria-hidden="true">üöó</span> Transport</button>
                                <button type="button" class="category-btn" data-category="üé¨" aria-label="Entertainment category"><span aria-hidden="true">üé¨</span> Entertainment</button>
                                <button type="button" class="category-btn" data-category="üõçÔ∏è" aria-label="Shopping category"><span aria-hidden="true">üõçÔ∏è</span> Shopping</button>
                                <button type="button" class="category-btn" data-category="üí°" aria-label="Bills category"><span aria-hidden="true">üí°</span> Bills</button>
                                <button type="button" class="category-btn" data-category="‚úàÔ∏è" aria-label="Travel category"><span aria-hidden="true">‚úàÔ∏è</span> Travel</button>
                            </div>
                        </div>
                        
                        <div class="form-group" aria-labelledby="split-with-label">
                            <label class="form-label" id="split-with-label">Split with</label>
                            <div class="people-selector" id="people-selector"></div>
                        </div>
                        
                        <div class="split-options" role="group" aria-labelledby="split-type-label">
                            <div class="split-type">
                                <label id="split-type-label" class="sr-only">Split Type</label>
                                <button type="button" class="split-btn active" data-type="equal" aria-pressed="true">Equal Split</button>
                                <button type="button" class="split-btn" data-type="percentage" aria-pressed="false">By Percentage</button>
                                <button type="button" class="split-btn premium" data-type="custom" onclick="showPremiumModal()">Custom Split <span class="pro-tag">PRO</span></button>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="showHome()">Cancel</button>
                            <button type="submit" class="btn-primary">
                                <span class="btn-text">Save Expense</span>
                                <span class="btn-icon" aria-hidden="true">üíæ</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Expenses View -->
                <div id="expenses-view" class="view" role="tabpanel">
                    <div class="view-header">
                        <button class="back-btn" onclick="showHome()" aria-label="Back to Home"><span aria-hidden="true">‚Üê</span></button>
                        <h2>All Expenses</h2>
                        <button class="filter-btn" onclick="showFilters()" aria-label="Filter expenses"><span aria-hidden="true">üîç</span></button>
                    </div>
                    
                    <div class="expenses-stats">
                        <div class="stat-summary">
                            <div class="stat-item">
                                <span class="stat-number" id="total-expenses" aria-live="polite">‚Çπ8,450</span>
                                <span class="stat-label">Total Spent</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="this-month" aria-live="polite">‚Çπ3,280</span>
                                <span class="stat-label">This Month</span>
                            </div>
                        </div>
                    </div>
            
                    <div class="activity-list" id="all-expenses-list" aria-live="polite"></div>
                </div>

                <!-- Balances View -->
                <div id="balances-view" class="view" role="tabpanel">
                    <div class="view-header">
                        <button class="back-btn" onclick="showHome()" aria-label="Back to Home"><span aria-hidden="true">‚Üê</span></button>
                        <h2>Balances</h2>
                        <button class="settle-all-btn" onclick="settleAll()">Settle All</button>
                    </div>
            
                    <div class="balances-list" id="balances-list" aria-live="polite"></div>
                </div>

                <!-- Groups View -->
                <div id="groups-view" class="view" role="tabpanel">
                    <div class="view-header">
                        <button class="back-btn" onclick="showHome()" aria-label="Back to Home"><span aria-hidden="true">‚Üê</span></button>
                        <h2>Groups</h2>
                        <button class="create-group-btn" onclick="showCreateGroup()" aria-label="Create new group"><span aria-hidden="true">+</span></button>
                    </div>
                    
                    <div class="groups-grid" id="groups-grid"></div>
                </div>

                <!-- Premium Features View -->
                <div id="premium-view" class="view" role="tabpanel">
                    <div class="view-header">
                        <button class="back-btn" onclick="showHome()" aria-label="Back to Home"><span aria-hidden="true">‚Üê</span></button>
                        <h2>Premium Features</h2>
                        <div class="premium-status">FREE TIER</div>
                    </div>
                    
                    <div id="premium-features"></div>
                </div>

                <!-- Settings View -->
                <div id="settings-view" class="view" role="tabpanel">
                    <div class="view-header">
                        <button class="back-btn" onclick="showHome()" aria-label="Back to Home"><span aria-hidden="true">‚Üê</span></button>
                        <h2>Settings</h2>
                    </div>
                    
                    <div class="settings-sections">
                        <div class="settings-section" aria-labelledby="account-settings-heading">
                            <h3 id="account-settings-heading">Account</h3>
                            <div class="setting-item" role="button" tabindex="0" onclick="showProfile()">
                                <div class="setting-icon" aria-hidden="true">üë§</div>
                                <div class="setting-content">
                                    <div class="setting-title">Profile</div>
                                    <div class="setting-desc">Manage your account details</div>
                                </div>
                                <div class="setting-arrow" aria-hidden="true">‚Ä∫</div>
                            </div>
                            <div class="setting-item" role="button" tabindex="0" onclick="showPaymentMethods()">
                                <div class="setting-icon" aria-hidden="true">üí≥</div>
                                <div class="setting-content">
                                    <div class="setting-title">Payment Methods</div>
                                    <div class="setting-desc">UPI, Cards, Bank accounts</div>
                                </div>
                                <div class="setting-arrow" aria-hidden="true">‚Ä∫</div>
                            </div>
                        </div>
                        
                        <div class="settings-section" aria-labelledby="app-settings-heading">
                            <h3 id="app-settings-heading">App</h3>
                            <div class="setting-item">
                                <div class="setting-icon" aria-hidden="true">üîî</div>
                                <div class="setting-content">
                                    <div class="setting-title">Notifications</div>
                                    <div class="setting-desc">Push notifications, reminders</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked aria-label="Enable notifications">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-icon" aria-hidden="true">üåô</div>
                                <div class="setting-content">
                                    <div class="setting-title">Dark Mode</div>
                                    <div class="setting-desc">Switch to dark theme</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" aria-label="Enable dark mode">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-section" aria-labelledby="premium-settings-heading">
                            <h3 id="premium-settings-heading">Premium</h3>
                            <div class="setting-item premium" role="button" tabindex="0" onclick="showPremiumFeatures()">
                                <div class="setting-icon" aria-hidden="true">‚ú®</div>
                                <div class="setting-content">
                                    <div class="setting-title">Upgrade to Premium</div>
                                    <div class="setting-desc">Unlock AI features & analytics</div>
                                </div>
                                <div class="upgrade-badge">UPGRADE</div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Bottom Navigation -->
            <nav class="bottom-nav" role="navigation" aria-label="Main">
                <button class="nav-item active" data-view="home" onclick="showHome()" aria-label="Home" aria-current="page">
                    <span class="nav-icon" aria-hidden="true">üè†</span>
                    <span class="nav-label">Home</span>
                </button>
                <button class="nav-item" data-view="expenses" onclick="showExpenses()" aria-label="Expenses">
                    <span class="nav-icon" aria-hidden="true">üìä</span>
                    <span class="nav-label">Expenses</span>
                </button>
                <button class="nav-item" data-view="balances" onclick="showBalances()" aria-label="Balances">
                    <span class="nav-icon" aria-hidden="true">‚öñÔ∏è</span>
                    <span class="nav-label">Balances</span>
                </button>
                <button class="nav-item" data-view="groups" onclick="showGroups()" aria-label="Groups, 2 active">
                    <span class="nav-icon" aria-hidden="true">üë•</span>
                    <span class="nav-label">Groups</span>
                    <span class="group-count" aria-hidden="true">2</span>
                </button>
                <button class="nav-item" data-view="premium" onclick="showPremiumFeatures()" aria-label="Premium features">
                    <span class="nav-icon" aria-hidden="true">‚ú®</span>
                    <span class="nav-label">Premium</span>
                    <span class="premium-indicator" aria-hidden="true">PRO</span>
                </button>
            </nav>
        </div>

        <!-- Floating Add Button -->
        <button class="fab" onclick="showAddExpense()" aria-label="Add new expense">
            <span class="fab-icon" aria-hidden="true">+</span>
        </button>

        <!-- Modals -->
        <div id="premium-modal" class="modal hidden" role="dialog" aria-labelledby="premium-modal-title" aria-modal="true">
            <div class="modal-overlay" onclick="closePremiumModal()"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="premium-modal-title">‚ú® Premium Features</h3>
                    <button class="modal-close" onclick="closePremiumModal()" aria-label="Close modal"><span aria-hidden="true">√ó</span></button>
                </div>
                <div class="premium-features-list"></div>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>

    <!-- Add after other script tags -->
<script type="module" src="js/countries-data.js"></script>
<script type="module" src="js/onboarding.js"></script>

</body>
</html>
