<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#846941" />
  <meta name="description" content="monEZ - Split expenses, not friendships" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%23846941'/><text x='50' y='65' font-size='50' text-anchor='middle' fill='white'>üí∞</text></svg>" />
  <link rel="manifest" href="manifest.json" />
  <title>monEZ - Split expenses, not friendships</title>
  <!-- CSS Files -->
  <link rel="stylesheet" href="styles/variables.css" />
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="stylesheet" href="styles/components.css" />
  <link rel="stylesheet" href="styles/onboarding.css" />
  <link rel="stylesheet" href="styles/auth-modern.css" />
</head>
<body>
  <!-- Onboarding Screen -->
  <div id="onboarding-screen" class="onboarding-screen hidden" aria-hidden="true">
    <div class="onboarding-content">
      <div class="logo-large">mon<span class="accent">EZ</span></div>
      <div class="tagline">Split expenses, not friendships</div>
      <div class="feature-list">
        <div class="feature-item">üí∞ Track shared expenses</div>
        <div class="feature-item">üë• Manage groups easily</div>
        <div class="feature-item">üìä See who owes what</div>
        <div class="feature-item">üîí Secure and private</div>
      </div>
      <button id="get-started-btn" class="btn gold-btn" aria-label="Get started with monEZ">Get Started</button>
    </div>
  </div>

  <div class="app">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen" aria-live="polite" aria-busy="true">
      <div class="loading-content">
        <div class="logo-large">mon<span class="accent">EZ</span></div>
        <div class="tagline">Split expenses, not friendships</div>
        <div class="loading-spinner" role="status" aria-label="Loading"></div>
        <div class="loading-text">Loading your financial companion...</div>
      </div>
    </div>

    <!-- Auth Panels -->
    <section id="panel-login" aria-labelledby="login-heading">
      <h2 id="login-heading" class="visually-hidden">Login</h2>
      <form id="email-login-form">
        <input id="login-email" type="email" placeholder="Email" autocomplete="email" required aria-label="Email" />
        <input id="login-password" type="password" placeholder="Password" autocomplete="current-password" required aria-label="Password" />
        <button type="submit" class="btn gold-btn" aria-label="Log in with email">Log in</button>
      </form>
      <button type="button" class="btn google-btn" id="google-login-btn" aria-label="Continue with Google">Continue with Google</button>
      <button type="button" class="btn gold-btn" data-target="#panel-signup" aria-label="Go to sign up">Create account</button>
      <button type="button" class="btn gold-btn" data-target="#panel-reset" aria-label="Forgot password">Forgot password?</button>
      <div id="login-message" class="form-message" role="status" aria-live="polite"></div>
    </section>

    <section id="panel-signup" aria-labelledby="signup-heading" hidden>
      <h2 id="signup-heading" class="visually-hidden">Sign up</h2>
      <form id="email-signup-form">
        <input id="signup-email" type="email" placeholder="Email" autocomplete="email" required aria-label="Email" />
        <input id="signup-password" type="password" placeholder="Password (min 8 characters)" autocomplete="new-password" required minlength="8" aria-label="Password" />
        <button type="submit" class="btn gold-btn" aria-label="Create account with email">Create account</button>
      </form>
      <button type="button" class="btn gold-btn" data-target="#panel-login" aria-label="Back to login">Back to Login</button>
      <div id="signup-message" class="form-message" role="status" aria-live="polite"></div>
    </section>

    <section id="panel-reset" aria-labelledby="reset-heading" hidden>
      <h2 id="reset-heading" class="visually-hidden">Reset Password</h2>
      <form id="password-reset-form">
        <input id="reset-email" type="email" placeholder="Email" autocomplete="email" required aria-label="Email" />
        <button type="submit" class="btn gold-btn" aria-label="Send password reset email">Send Reset Email</button>
      </form>
      <button type="button" class="btn gold-btn" data-target="#panel-login" aria-label="Back to login">Back to Login</button>
      <div id="reset-message" class="form-message" role="status" aria-live="polite"></div>
    </section>

    <!-- Main App Dashboard -->
    <div id="main-app" class="main-app" hidden>
      <!-- Header -->
      <header class="app-header">
        <div class="logo">mon<span class="accent">EZ</span></div>
        <button id="user-menu-btn" class="btn icon-btn" aria-label="User menu" aria-haspopup="true">
          <span class="user-icon">üë§</span>
        </button>
      </header>

      <!-- User Menu Dropdown -->
      <div id="user-menu" class="user-menu" hidden>
        <div id="user-email-display" class="user-email"></div>
        <button id="logout-btn" class="btn" aria-label="Log out">Log out</button>
      </div>

      <!-- Navigation Tabs -->
      <nav class="nav-tabs" role="tablist" aria-label="Main navigation">
        <button id="tab-dashboard" class="nav-tab active" role="tab" aria-selected="true" aria-controls="view-dashboard">Dashboard</button>
        <button id="tab-groups" class="nav-tab" role="tab" aria-selected="false" aria-controls="view-groups">Groups</button>
        <button id="tab-activity" class="nav-tab" role="tab" aria-selected="false" aria-controls="view-activity">Activity</button>
      </nav>

      <!-- Dashboard View -->
      <div id="view-dashboard" class="view" role="tabpanel" aria-labelledby="tab-dashboard">
        <div class="view-header">
          <h1>Dashboard</h1>
        </div>
        <div class="balance-summary">
          <div class="balance-card">
            <div class="balance-label">You owe</div>
            <div id="total-owed" class="balance-amount owed">$0.00</div>
          </div>
          <div class="balance-card">
            <div class="balance-label">You're owed</div>
            <div id="total-owing" class="balance-amount owing">$0.00</div>
          </div>
        </div>
        <div class="recent-activity">
          <h2>Recent Activity</h2>
          <div id="recent-activity-list" class="activity-list">
            <div class="empty-state">No recent activity</div>
          </div>
        </div>
      </div>

      <!-- Groups View -->
      <div id="view-groups" class="view" role="tabpanel" aria-labelledby="tab-groups" hidden>
        <div class="view-header">
          <h1>Groups</h1>
          <button id="create-group-btn" class="btn gold-btn" aria-label="Create new group">+ New Group</button>
        </div>
        <div id="groups-list" class="groups-list">
          <div class="empty-state">No groups yet. Create one to get started!</div>
        </div>
      </div>

      <!-- Activity View -->
      <div id="view-activity" class="view" role="tabpanel" aria-labelledby="tab-activity" hidden>
        <div class="view-header">
          <h1>Activity</h1>
        </div>
        <div id="activity-list" class="activity-list">
          <div class="empty-state">No activity yet</div>
        </div>
      </div>

      <!-- Group Detail View -->
      <div id="view-group-detail" class="view view-detail" hidden>
        <div class="view-header">
          <button id="back-to-groups-btn" class="btn icon-btn" aria-label="Back to groups">‚Üê Back</button>
          <h1 id="group-detail-name">Group Name</h1>
          <button id="group-settings-btn" class="btn icon-btn" aria-label="Group settings">‚öôÔ∏è</button>
        </div>
        <div class="group-balance-summary">
          <div class="balance-card">
            <div class="balance-label">Group total</div>
            <div id="group-total" class="balance-amount">$0.00</div>
          </div>
          <div class="balance-card">
            <div class="balance-label">Your balance</div>
            <div id="group-your-balance" class="balance-amount">$0.00</div>
          </div>
        </div>
        <div class="group-members">
          <h2>Members</h2>
          <div id="group-members-list" class="members-list"></div>
        </div>
        <div class="group-expenses">
          <h2>Expenses</h2>
          <button id="add-expense-btn" class="btn gold-btn" aria-label="Add expense">+ Add Expense</button>
          <div id="group-expenses-list" class="expenses-list"></div>
        </div>
      </div>

      <!-- Create Group Modal -->
      <div id="create-group-modal" class="modal" hidden>
        <div class="modal-content">
          <div class="modal-header">
            <h2>Create New Group</h2>
            <button class="modal-close" aria-label="Close modal">√ó</button>
          </div>
          <form id="create-group-form">
            <input id="group-name-input" type="text" placeholder="Group name" required aria-label="Group name" />
            <textarea id="group-description-input" placeholder="Description (optional)" aria-label="Group description"></textarea>
            <button type="submit" class="btn gold-btn">Create Group</button>
          </form>
        </div>
      </div>

      <!-- Add Expense Modal -->
      <div id="add-expense-modal" class="modal" hidden>
        <div class="modal-content">
          <div class="modal-header">
            <h2>Add Expense</h2>
            <button class="modal-close" aria-label="Close modal">√ó</button>
          </div>
          <form id="add-expense-form">
            <input id="expense-description-input" type="text" placeholder="Description" required aria-label="Expense description" />
            <input id="expense-amount-input" type="number" step="0.01" min="0" placeholder="Amount" required aria-label="Expense amount" />
            <label>
              <input id="expense-split-evenly" type="checkbox" checked aria-label="Split evenly" />
              Split evenly
            </label>
            <button type="submit" class="btn gold-btn">Add Expense</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase and App Scripts - Proper loading order -->
  <script type="module" src="js/firebase.js"></script>
  <script type="module" src="js/app.js"></script>
</body>
</html>
